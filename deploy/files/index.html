<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„ÙƒÙ…Ø±ÙƒÙŠØ© Ø§Ù„Ø¹Ø±Ø§Ù‚ÙŠØ©</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #1a5f2a;
            --primary-light: #2d8a42;
            --primary-dark: #0f3d1a;
            --accent: #c9a227;
            --accent-light: #e6c54d;
            --bg-dark: #0a1f10;
            --bg-card: #122318;
            --bg-input: #1a2f21;
            --text-primary: #ffffff;
            --text-secondary: #a8c4ad;
            --border: #2d5a3a;
            --success: #4ade80;
            --warning: #fbbf24;
            --error: #f87171;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Tajawal', sans-serif;
            background: var(--bg-dark);
            min-height: 100vh;
            color: var(--text-primary);
            background-image:
                radial-gradient(ellipse at 20% 20%, rgba(26, 95, 42, 0.15) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(201, 162, 39, 0.1) 0%, transparent 50%);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .header {
            text-align: center;
            margin-bottom: 3rem;
            padding: 2rem;
            background: linear-gradient(135deg, var(--bg-card) 0%, var(--primary-dark) 100%);
            border-radius: 20px;
            border: 1px solid var(--border);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--accent), var(--primary));
        }

        .header-icon {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            display: inline-block;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }

        .header p {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }

        .input-section {
            background: var(--bg-card);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid var(--border);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }

        .input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .input-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-secondary);
            font-weight: 500;
            font-size: 0.95rem;
        }

        .input-group label span {
            color: var(--accent);
            font-size: 0.85rem;
            margin-right: 0.5rem;
        }

        .input-wrapper {
            position: relative;
        }

        .input-wrapper input {
            width: 100%;
            padding: 1rem 1.2rem;
            padding-right: 3rem;
            background: var(--bg-input);
            border: 2px solid var(--border);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 1.1rem;
            font-family: 'Tajawal', sans-serif;
            transition: all 0.3s ease;
        }

        .input-wrapper input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 20px rgba(201, 162, 39, 0.2);
        }

        .input-wrapper input::placeholder {
            color: var(--text-secondary);
            opacity: 0.5;
        }

        .input-icon {
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.2rem;
            opacity: 0.6;
        }

        .unit-price-display {
            margin-top: 0.5rem;
            padding: 0.5rem 1rem;
            background: rgba(74, 222, 128, 0.1);
            border: 1px solid var(--success);
            border-radius: 8px;
            font-size: 0.9rem;
            color: var(--success);
            display: none;
        }

        .unit-price-display.show {
            display: block;
        }

        .calculate-btn {
            width: 100%;
            padding: 1.2rem 2rem;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            border: none;
            border-radius: 12px;
            color: white;
            font-size: 1.2rem;
            font-weight: 700;
            font-family: 'Tajawal', sans-serif;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.8rem;
        }

        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(26, 95, 42, 0.4);
        }

        .results-section {
            display: none;
        }

        .results-section.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .product-card {
            background: linear-gradient(135deg, var(--bg-card) 0%, var(--primary-dark) 100%);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid var(--border);
        }

        .product-card h3 {
            color: var(--accent);
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }

        .product-info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 1rem;
        }

        .info-item {
            background: rgba(0, 0, 0, 0.2);
            padding: 1rem;
            border-radius: 10px;
            border-right: 3px solid var(--accent);
        }

        .info-item .label {
            color: var(--text-secondary);
            font-size: 0.85rem;
            margin-bottom: 0.3rem;
        }

        .info-item .value {
            color: var(--text-primary);
            font-size: 1.1rem;
            font-weight: 600;
        }

        .info-item .value.highlight {
            color: var(--accent);
            font-size: 1.2rem;
        }

        .info-item .value.success {
            color: var(--success);
        }

        .calculation-card {
            background: var(--bg-card);
            border-radius: 20px;
            overflow: hidden;
            border: 1px solid var(--success);
            margin-bottom: 2rem;
        }

        .calculation-header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            padding: 1.5rem;
            text-align: center;
        }

        .calculation-header h3 {
            color: white;
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
        }

        .calculation-header .subtitle {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.95rem;
        }

        .calculation-body {
            padding: 1.5rem;
        }

        .step {
            display: flex;
            align-items: flex-start;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            margin-bottom: 0.8rem;
            border-right: 3px solid var(--primary);
        }

        .step-number {
            background: var(--primary);
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.9rem;
            margin-left: 1rem;
            flex-shrink: 0;
        }

        .step-content {
            flex: 1;
        }

        .step-title {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 0.3rem;
        }

        .step-formula {
            color: var(--accent);
            font-size: 1.05rem;
            font-weight: 600;
            direction: ltr;
            text-align: right;
        }

        .final-result {
            background: linear-gradient(135deg, var(--success) 0%, #22c55e 100%);
            border-radius: 15px;
            padding: 2rem;
            text-align: center;
            margin-top: 1.5rem;
        }

        .final-result .label {
            color: rgba(0, 0, 0, 0.7);
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .final-result .amount {
            font-size: 2.8rem;
            font-weight: 800;
            color: var(--bg-dark);
            direction: ltr;
        }

        .final-result .amount-usd {
            color: rgba(0, 0, 0, 0.6);
            font-size: 1.2rem;
            margin-top: 0.3rem;
            font-weight: 600;
        }

        .pdf-matches {
            background: var(--bg-card);
            border-radius: 20px;
            padding: 2rem;
            margin-top: 2rem;
            border: 1px solid var(--border);
        }

        .pdf-matches h3 {
            color: var(--accent);
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }

        .match-list {
            display: grid;
            gap: 1rem;
        }

        .match-item {
            display: flex;
            align-items: center;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .match-item:hover {
            background: rgba(52, 211, 153, 0.15);
            border-color: var(--accent);
            transform: translateX(-5px);
        }

        .match-item.selected {
            background: rgba(74, 222, 128, 0.2);
            border: 2px solid var(--success);
            box-shadow: 0 4px 12px rgba(74, 222, 128, 0.3);
        }

        .match-item:first-child {
            background: rgba(74, 222, 128, 0.1);
            border: 2px solid var(--success);
        }

        .match-rank {
            width: 30px;
            height: 30px;
            background: var(--border);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.85rem;
            margin-left: 1rem;
        }

        .match-item:first-child .match-rank {
            background: var(--success);
            color: var(--bg-dark);
        }

        .match-details {
            flex: 1;
        }

        .match-desc {
            color: var(--text-primary);
            font-weight: 500;
            margin-bottom: 0.3rem;
        }

        .match-section {
            color: var(--text-secondary);
            font-size: 0.85rem;
        }

        .match-rate {
            text-align: left;
        }

        .match-rate .rate {
            color: var(--success);
            font-size: 1.3rem;
            font-weight: 700;
        }

        .error-message {
            background: rgba(248, 113, 113, 0.1);
            border: 1px solid var(--error);
            border-radius: 15px;
            padding: 1.5rem;
            text-align: center;
            margin-top: 2rem;
            display: none;
        }

        .error-message.show {
            display: block;
        }

        .error-message .icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .error-message h4 {
            color: var(--error);
            margin-bottom: 0.5rem;
        }

        .error-message p {
            color: var(--text-secondary);
        }

        .warning-box {
            background: rgba(251, 191, 36, 0.1);
            border: 1px solid var(--warning);
            border-radius: 10px;
            padding: 1rem;
            margin-bottom: 1rem;
            display: none;
        }

        .warning-box.show {
            display: block;
        }

        .warning-box p {
            color: var(--warning);
            font-size: 0.9rem;
        }

        .unit-toggle {
            background: var(--bg-input);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 0.5rem;
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .unit-toggle-btn {
            flex: 1;
            padding: 0.8rem 1rem;
            background: transparent;
            border: none;
            border-radius: 8px;
            color: var(--text-secondary);
            font-family: 'Tajawal', sans-serif;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .unit-toggle-btn:hover {
            background: rgba(201, 162, 39, 0.1);
        }

        .unit-toggle-btn.active {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            color: white;
            font-weight: 600;
        }

        .footer {
            text-align: center;
            padding: 2rem;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            .header h1 {
                font-size: 1.8rem;
            }

            .final-result .amount {
                font-size: 2rem;
            }
        }

        .spinner {
            width: 24px;
            height: 24px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .loading {
            opacity: 0.7;
            pointer-events: none;
        }

        .autocomplete-container {
            position: relative;
        }

        .autocomplete-results {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: var(--bg-input);
            border: 2px solid var(--border);
            border-top: none;
            border-radius: 0 0 12px 12px;
            max-height: 300px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
        }

        .autocomplete-results.show {
            display: block;
        }

        .autocomplete-header {
            padding: 0.5rem 1rem;
            font-size: 0.8rem;
            color: var(--text-secondary);
            background: rgba(0, 0, 0, 0.2);
            border-bottom: 1px solid var(--border);
        }

        .autocomplete-item {
            padding: 0.8rem 1rem;
            cursor: pointer;
            border-bottom: 1px solid var(--border);
            transition: background 0.2s;
        }

        .autocomplete-item:hover {
            background: rgba(201, 162, 39, 0.1);
        }

        .autocomplete-item .hs-code {
            color: var(--accent);
            font-weight: 700;
            margin-left: 0.5rem;
        }

        .autocomplete-item .desc {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .autocomplete-item .price {
            color: var(--success);
            font-size: 0.85rem;
            margin-top: 0.3rem;
        }

        .autocomplete-item .no-price {
            color: var(--warning);
            font-size: 0.85rem;
            margin-top: 0.3rem;
        }

        .price-badge {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-left: 6px;
            vertical-align: middle;
        }

        .price-badge.has-price {
            background: var(--success);
        }

        .price-badge.no-price {
            background: var(--warning);
        }

        .manual-value-section {
            display: none;
            margin-top: 1rem;
            padding: 1.2rem;
            background: rgba(251, 191, 36, 0.08);
            border: 2px solid var(--warning);
            border-radius: 12px;
            animation: fadeIn 0.3s ease;
        }

        .manual-value-section.show {
            display: block;
        }

        .manual-value-section label {
            display: block;
            color: var(--warning);
            font-weight: 600;
            margin-bottom: 0.5rem;
            font-size: 0.95rem;
        }

        .manual-value-section .hint {
            color: var(--text-secondary);
            font-size: 0.85rem;
            margin-bottom: 0.8rem;
        }
    </style>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5581313795010837"
        crossorigin="anonymous"></script>
</head>

<body>
    <div class="container">
        <!-- Google AdSense Placeholder -->
        <div class="adsense-placeholder"
            style="margin: 1rem 0; padding: 1rem; background: #f0f0f0; border: 1px dashed #ccc; text-align: center; color: #666;">
            Google AdSense Area
            <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-5581313795010837"
                data-ad-slot="XXXXXXXXXX" data-ad-format="auto" data-full-width-responsive="true"></ins>
            <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
        </div>
        <header class="header">
            <div class="header-icon">ğŸ›ï¸</div>
            <h1>Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„ÙƒÙ…Ø±ÙƒÙŠØ© Ø§Ù„Ø¹Ø±Ø§Ù‚ÙŠØ©</h1>
            <p>Ø§Ø­Ø³Ø¨ Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„ÙƒÙ…Ø±ÙƒÙŠØ© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„ØªØ¹Ø±ÙØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© 2026 ÙˆÙ‚Ø±Ø§Ø± Ù…Ø¬Ù„Ø³ Ø§Ù„ÙˆØ²Ø±Ø§Ø¡ 957</p>
        </header>

        <section class="input-section">
            <div class="input-grid">
                <div class="input-group">
                    <label>Ø±Ù…Ø² HS Code <span>(Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø¬Ù…Ø±ÙƒÙŠ)</span></label>
                    <div class="input-wrapper autocomplete-container">
                        <input type="text" id="hsCode" placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„Ø±Ù…Ø² Ø£Ùˆ Ø§Ù„ÙˆØµÙ: Ù…Ø«Ø§Ù„ 87089900 Ø£Ùˆ Ø­Ù„ÙŠØ¨"
                            maxlength="50" autocomplete="off">
                        <span class="input-icon">ğŸ”¢</span>
                        <div class="autocomplete-results" id="autocompleteResults"></div>
                    </div>
                    <div class="unit-price-display" id="unitPriceDisplay"></div>
                </div>

                <div class="input-group">
                    <label>Ù†ÙˆØ¹ Ø§Ù„Ù‚ÙŠØ§Ø³ <span>(Ø§Ø®ØªØ± Ø¨Ø§Ù„ÙˆØ²Ù† Ø£Ùˆ Ø¨Ø§Ù„Ù‚Ø·Ø¹)</span></label>
                    <div class="unit-toggle">
                        <button type="button" class="unit-toggle-btn active" data-unit="weight"
                            onclick="toggleUnit('weight')">
                            âš–ï¸ Ø¨Ø§Ù„ÙˆØ²Ù†
                        </button>
                        <button type="button" class="unit-toggle-btn" data-unit="quantity"
                            onclick="toggleUnit('quantity')">
                            ğŸ“¦ Ø¨Ø§Ù„Ù‚Ø·Ø¹
                        </button>
                    </div>
                </div>

                <div class="input-group">
                    <label id="weightLabel">Ø§Ù„ÙˆØ²Ù† <span>(ÙƒÙŠÙ„ÙˆØºØ±Ø§Ù…)</span></label>
                    <div class="input-wrapper">
                        <input type="number" id="weight" placeholder="Ù…Ø«Ø§Ù„: 20391.82" min="0" step="0.01">
                        <span class="input-icon" id="weightIcon">âš–ï¸</span>
                    </div>
                </div>
            </div>

            <div class="warning-box" id="warningBox">
                <p>âš ï¸ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø³Ø¹Ø± ÙˆØ­Ø¯Ø© (AVR_MNT) Ù„Ù‡Ø°Ø§ Ø§Ù„Ø±Ù…Ø² ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª. ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ© ÙŠØ¯ÙˆÙŠØ§Ù‹.</p>
            </div>

            <div class="manual-value-section" id="manualValueSection">
                <label>ğŸ’µ Ø£Ø¯Ø®Ù„ Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ© Ø¨Ø§Ù„Ø¯ÙˆÙ„Ø§Ø± (USD)</label>
                <div class="hint">Ù‡Ø°Ø§ Ø§Ù„Ø±Ù…Ø² Ù„Ø§ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø³Ø¹Ø± ØªÙ‚Ø¯ÙŠØ±ÙŠ. Ø£Ø¯Ø®Ù„ Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ© Ù„Ù„Ø¨Ø¶Ø§Ø¹Ø© Ø¨Ø§Ù„Ø¯ÙˆÙ„Ø§Ø± Ù„Ø­Ø³Ø§Ø¨
                    Ø§Ù„Ø±Ø³ÙˆÙ….</div>
                <div class="input-wrapper">
                    <input type="number" id="manualValue" placeholder="Ù…Ø«Ø§Ù„: 50000" min="0" step="0.01">
                    <span class="input-icon">ğŸ’°</span>
                </div>
            </div>

            <button class="calculate-btn" id="calculateBtn" onclick="calculate()">
                <span class="btn-text">Ø§Ø­Ø³Ø¨ Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„ÙƒÙ…Ø±ÙƒÙŠØ©</span>
                <span class="btn-icon">ğŸ“Š</span>
            </button>
        </section>

        <section class="results-section" id="resultsSection">
            <div class="product-card" id="productCard">
                <h3>ğŸ“¦ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¨Ø¶Ø§Ø¹Ø©</h3>
                <div class="product-info-grid" id="productInfo"></div>
            </div>

            <div class="calculation-card">
                <div class="calculation-header">
                    <h3>ğŸ“Š Ø­Ø³Ø§Ø¨ Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„ÙƒÙ…Ø±ÙƒÙŠØ©</h3>
                    <div class="subtitle">Ø®Ø·ÙˆØ§Øª Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ©</div>
                </div>
                <div class="calculation-body" id="calculationSteps"></div>
            </div>

            <label class="toggle-control" id="pdfToggleControl" style="display: none;">
                <input type="checkbox" class="toggle-checkbox" id="showPdfMatches" checked
                    onchange="togglePdfMatches()">
                <span class="toggle-label">ğŸ“‹ Ø¹Ø±Ø¶ Ø§Ù„ØªØ·Ø§Ø¨Ù‚Ø§Øª Ù…Ù† Ù‚Ø±Ø§Ø± Ù…Ø¬Ù„Ø³ Ø§Ù„ÙˆØ²Ø±Ø§Ø¡ 957</span>
            </label>

            <div class="pdf-matches" id="pdfMatches">
                <h3>ğŸ“‹ Ø§Ù„ØªØ·Ø§Ø¨Ù‚Ø§Øª Ù…Ù† Ù‚Ø±Ø§Ø± Ù…Ø¬Ù„Ø³ Ø§Ù„ÙˆØ²Ø±Ø§Ø¡ 957</h3>
                <div class="match-list" id="matchList"></div>
            </div>
        </section>

        <div class="error-message" id="errorSection">
            <div class="icon">âš ï¸</div>
            <h4>Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù†ØªØ§Ø¦Ø¬</h4>
            <p id="errorText"></p>
        </div>

        <footer class="footer">
            <p>Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„ÙƒÙ…Ø±ÙƒÙŠØ© Ø§Ù„Ø¹Ø±Ø§Ù‚ÙŠØ© Â© 2026</p>
            <p>Ù…Ø¨Ù†ÙŠ Ø¹Ù„Ù‰ Ø§Ù„ØªØ¹Ø±ÙØ© Ø§Ù„Ø¬Ù…Ø±ÙƒÙŠØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ÙˆÙ‚Ø±Ø§Ø± Ù…Ø¬Ù„Ø³ Ø§Ù„ÙˆØ²Ø±Ø§Ø¡ Ø±Ù‚Ù… 957</p>
        </footer>
    </div>

    <script>
        let currentUnit = 'weight'; // Default to weight

        function toggleUnit(unit) {
            currentUnit = unit;
            const weightBtn = document.querySelector('[data-unit="weight"]');
            const quantityBtn = document.querySelector('[data-unit="quantity"]');
            const weightLabel = document.getElementById('weightLabel');
            const weightInput = document.getElementById('weight');
            const weightIcon = document.getElementById('weightIcon');

            if (unit === 'weight') {
                weightBtn.classList.add('active');
                quantityBtn.classList.remove('active');
                weightLabel.innerHTML = 'Ø§Ù„ÙˆØ²Ù† <span>(ÙƒÙŠÙ„ÙˆØºØ±Ø§Ù…)</span>';
                weightInput.placeholder = 'Ù…Ø«Ø§Ù„: 20391.82';
                weightIcon.textContent = 'âš–ï¸';
            } else {
                weightBtn.classList.remove('active');
                quantityBtn.classList.add('active');
                weightLabel.innerHTML = 'Ø§Ù„ÙƒÙ…ÙŠØ© <span>(Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹)</span>';
                weightInput.placeholder = 'Ù…Ø«Ø§Ù„: 100';
                weightIcon.textContent = 'ğŸ“¦';
            }
        }

        function togglePdfMatches() {
            const checkbox = document.getElementById('showPdfMatches');
            const pdfMatches = document.getElementById('pdfMatches');

            if (checkbox.checked) {
                pdfMatches.style.display = 'block';
            } else {
                pdfMatches.style.display = 'none';
            }
        }

        function selectTariffRate(selectedRate, clickedElement) {
            // Remove selected class from all match items
            document.querySelectorAll('.match-item').forEach(item => {
                item.classList.remove('selected');
            });

            // Add selected class to clicked item
            clickedElement.classList.add('selected');

            // Recalculate with the new tariff rate
            recalculateWithRate(selectedRate);
        }

        function recalculateWithRate(customRate) {
            const hsInput = document.getElementById('hsCode');
            const hsCode = hsInput.value.trim();
            const weight = parseFloat(document.getElementById('weight').value);

            const excelData = findHSCode(hsCode);
            if (!excelData) return;

            const unitPrice = excelData.avr_mnt;
            const isManualMode = !unitPrice;
            const manualValue = parseFloat(document.getElementById('manualValue').value) || 0;
            const unitType = excelData.avr_unt || 'KGM';
            const unitName = excelData.avr_unt_nam || 'ÙƒÙŠÙ„Ùˆ ØºØ±Ø§Ù…';
            const USD_TO_IQD = 1320;

            const totalTariff = customRate;
            const tariffRate = customRate - 3;
            const additionalRate = 3;

            let totalValueUsd;
            if (isManualMode) {
                totalValueUsd = manualValue;
            } else {
                if (!weight || weight <= 0) return;
                totalValueUsd = unitPrice * weight;
            }

            const totalValueIqd = totalValueUsd * USD_TO_IQD;
            const dutyBeforeDiscount = totalValueIqd * (totalTariff / 100);
            const finalDuty = dutyBeforeDiscount * 0.75;
            const finalDutyUsd = finalDuty / USD_TO_IQD;

            const step1Html = isManualMode
                ? `<div class="step-title">Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ© Ø¨Ø§Ù„Ø¯ÙˆÙ„Ø§Ø± (Ø¥Ø¯Ø®Ø§Ù„ ÙŠØ¯ÙˆÙŠ)</div>
                   <div class="step-formula">$${formatNumber(totalValueUsd)} USD</div>`
                : `<div class="step-title">Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ© Ø¨Ø§Ù„Ø¯ÙˆÙ„Ø§Ø±</div>
                   <div class="step-formula">$${unitPrice.toFixed(2)} Ã— ${weight} ${unitName} = $${formatNumber(totalValueUsd)} USD</div>`;

            document.getElementById('calculationSteps').innerHTML = `
            <div class="step">
                <div class="step-number">1</div>
                <div class="step-content">${step1Html}</div>
            </div>
            <div class="step">
                <div class="step-number">2</div>
                <div class="step-content">
                    <div class="step-title">Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ø¯ÙŠÙ†Ø§Ø± Ø§Ù„Ø¹Ø±Ø§Ù‚ÙŠ (Ø³Ø¹Ø± Ø§Ù„ØµØ±Ù: ${USD_TO_IQD})</div>
                    <div class="step-formula">$${formatNumber(totalValueUsd)} Ã— ${USD_TO_IQD} = ${formatNumber(totalValueIqd)} IQD</div>
                </div>
            </div>
            <div class="step">
                <div class="step-number">3</div>
                <div class="step-content">
                    <div class="step-title">Ø§Ù„ØªØ¹Ø±ÙŠÙØ© Ø§Ù„ÙƒÙ…Ø±ÙƒÙŠØ© (${tariffRate.toFixed(1)}% + ${additionalRate}% = ${totalTariff}%) - <span style="color: var(--warning);">âœï¸ ØªÙ… Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ ÙŠØ¯ÙˆÙŠØ§Ù‹</span></div>
                    <div class="step-formula">${formatNumber(totalValueIqd)} Ã— ${totalTariff}% = ${formatNumber(dutyBeforeDiscount)} IQD</div>
                </div>
            </div>
            <div class="step">
                <div class="step-number">4</div>
                <div class="step-content">
                    <div class="step-title">ØªØ·Ø¨ÙŠÙ‚ Ù†Ø³Ø¨Ø© 75%</div>
                    <div class="step-formula">${formatNumber(dutyBeforeDiscount)} Ã— 75% = ${formatNumber(finalDuty)} IQD</div>
                </div>
            </div>
            <div class="final-result">
                <div class="label">ğŸ’° Ø§Ù„Ø±Ø³Ù… Ø§Ù„ÙƒÙ…Ø±ÙƒÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</div>
                <div class="amount">${formatNumberInt(finalDuty)} IQD</div>
                <div class="amount-usd">â‰ˆ $${formatNumber(finalDutyUsd)} USD</div>
            </div>
        `;
        }

        const PDF_TARIFF_DATA = {
            1: {
                name: "Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø£ÙˆÙ„ - Ø§Ù„Ø­ÙŠÙˆØ§Ù†Ø§Øª Ø§Ù„Ø­ÙŠØ© ÙˆÙ…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø­ÙŠÙˆØ§Ù†ÙŠØ©", hs_range: [1, 5], items: [
                    { description: "Ø­ÙŠÙˆØ§Ù†Ø§Øª Ø­ÙŠØ©", rate: 10 },
                    { description: "Ù„Ø­ÙˆÙ… ÙˆØ§Ø­Ø´Ø§Ø¡ ÙˆØ£Ø·Ø±Ø§Ù ØµØ§Ù„Ø­Ø© Ù„Ù„Ø£ÙƒÙ„", rate: 5 },
                    { description: "Ù„Ø­ÙˆÙ… Ø¯ÙˆØ§Ø¬Ù† Ù…Ù‚Ø·Ø¹Ø© ÙˆØºÙŠØ± Ù…Ù‚Ø·Ø¹Ø©", rate: 30 },
                    { description: "Ù…ØµÙ†Ø¹Ø§Øª Ø§Ù„Ù„Ø­ÙˆÙ… ÙˆØ§Ù„Ù„Ø­Ù… Ø§Ù„Ù…ÙØ±ÙˆÙ…", rate: 30 },
                    { description: "Ø§Ø³Ù…Ø§Ùƒ ÙˆÙ‚Ø´Ø±ÙŠØ§Øª ÙˆØ±Ø®ÙˆÙŠØ§Øª", rate: 5 },
                    { description: "Ø§Ù„Ø¨Ø§Ù† ÙˆÙ…Ù†ØªØ¬Ø§Øª ØµÙ†Ø§Ø¹Ø© Ø§Ù„Ø§Ù„Ø¨Ø§Ù†", rate: 5 },
                    { description: "Ø¨ÙŠØ¶ Ø§Ù„Ù…Ø§Ø¦Ø¯Ø©", rate: 30 },
                    { description: "Ù…Ù†ØªØ¬Ø§Øª Ø£Ø®Ø±Ù‰ Ù…Ù† Ø£ØµÙ„ Ø­ÙŠÙˆØ§Ù†ÙŠ", rate: 10 }
                ]
            },
            2: {
                name: "Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø«Ø§Ù†ÙŠ - Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ù†Ø¨Ø§ØªÙŠØ©", hs_range: [6, 14], items: [
                    { description: "Ø®Ø¶Ø± ÙˆØ¬Ø°ÙˆØ± ØµØ§Ù„Ø­Ø© Ù„Ù„Ø§ÙƒÙ„", rate: 5 },
                    { description: "ÙÙˆØ§ÙƒÙ‡ ÙˆØ«Ù…Ø§Ø± ØµØ§Ù„Ø­Ø© Ù„Ù„Ø§ÙƒÙ„", rate: 5 },
                    { description: "Ø¨Ù† ÙˆØ´Ø§ÙŠ ÙˆØ¨Ù‡Ø§Ø±Ø§Øª ÙˆØªÙˆØ§Ø¨Ù„", rate: 10 },
                    { description: "Ø­Ø¨ÙˆØ¨", rate: 5 },
                    { description: "Ø·Ø­ÙŠÙ† Ø¨ÙƒØ§ÙØ© Ø§Ù†ÙˆØ§Ø¹Ù‡", rate: 30 }
                ]
            },
            3: {
                name: "Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø«Ø§Ù„Ø« - Ø´Ø­ÙˆÙ… ÙˆØ¯Ù‡ÙˆÙ† ÙˆØ²ÙŠÙˆØª", hs_range: [15, 15], items: [
                    { description: "Ø´Ø­ÙˆÙ… ÙˆØ¯Ù‡ÙˆÙ† ÙˆØ²ÙŠÙˆØª Ø­ÙŠÙˆØ§Ù†ÙŠØ© Ø§Ùˆ Ù†Ø¨Ø§ØªÙŠØ©", rate: 5 }
                ]
            },
            4: {
                name: "Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø±Ø§Ø¨Ø¹ - Ù…Ù†ØªØ¬Ø§Øª ØµÙ†Ø§Ø¹Ø© Ø§Ù„Ø£ØºØ°ÙŠØ©", hs_range: [16, 24], items: [
                    { description: "Ù…Ø­Ø¶Ø±Ø§Øª Ù„Ø­ÙˆÙ… ÙˆØ§Ø³Ù…Ø§Ùƒ", rate: 30 },
                    { description: "Ø³ÙƒØ± Ø§Ùˆ Ù…ØµÙ†Ø¹Ø§Øª Ø³ÙƒØ±ÙŠØ©", rate: 5 },
                    { description: "ÙƒØ§ÙƒØ§Ùˆ ÙˆÙ…Ø­Ø¶Ø±Ø§ØªÙ‡", rate: 10 },
                    { description: "Ù…Ø´Ø±ÙˆØ¨Ø§Øª ÙˆØ³ÙˆØ§Ø¦Ù„ ÙƒØ­ÙˆÙ„ÙŠØ©", rate: 30 },
                    { description: "ØªØ¨Øº ÙˆØ§Ø¨Ø¯Ø§Ù„ ØªØ¨Øº", rate: 30 }
                ]
            },
            5: {
                name: "Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø®Ø§Ù…Ø³ - Ù…Ù†ØªØ¬Ø§Øª Ù…Ø¹Ø¯Ù†ÙŠØ©", hs_range: [25, 27], items: [
                    { description: "Ù…Ù„Ø­ ÙˆØ§ØªØ±Ø¨Ø© ÙˆØ§Ø­Ø¬Ø§Ø± ÙˆØ§Ø³Ù…Ù†Øª", rate: 15 },
                    { description: "Ø®Ø§Ù…Ø§Øª Ù…Ø¹Ø§Ø¯Ù†", rate: 15 },
                    { description: "Ø²ÙŠÙˆØª Ù…Ø¹Ø¯Ù†ÙŠØ© ÙˆÙˆÙ‚ÙˆØ¯", rate: 15 }
                ]
            },
            6: {
                name: "Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø³Ø§Ø¯Ø³ - Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„ØµÙ†Ø§Ø¹Ø§Øª Ø§Ù„ÙƒÙŠÙ…Ø§ÙˆÙŠØ©", hs_range: [28, 38], items: [
                    { description: "Ù…Ù†ØªØ¬Ø§Øª ÙƒÙŠÙ…ÙŠØ§ÙˆÙŠØ©", rate: 10 },
                    { description: "Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„ØµÙŠØ¯Ù„Ø©", rate: 5 },
                    { description: "Ø§Ø³Ù…Ø¯Ø©", rate: 5 },
                    { description: "Ø¯Ù‡Ø§Ù†Ø§Øª ÙˆØ±Ù†ÙŠØ´", rate: 10 },
                    { description: "Ø¹Ø·ÙˆØ± ÙˆÙ…Ø­Ø¶Ø±Ø§Øª ØªØ¬Ù…ÙŠÙ„", rate: 10 },
                    { description: "ØµØ§Ø¨ÙˆÙ† ÙˆÙ…Ø­Ø¶Ø±Ø§Øª ØºØ³ÙŠÙ„", rate: 10 }
                ]
            },
            7: {
                name: "Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø³Ø§Ø¨Ø¹ - Ù„Ø¯Ø§Ø¦Ù† ÙˆÙ…Ø·Ø§Ø·", hs_range: [39, 40], items: [
                    { description: "Ù„Ø¯Ø§Ø¦Ù† ÙˆÙ…ØµÙ†ÙˆØ¹Ø§ØªÙ‡Ø§", rate: 10 },
                    { description: "Ù…Ø·Ø§Ø· ÙˆÙ…ØµÙ†ÙˆØ¹Ø§ØªÙ‡", rate: 10 }
                ]
            },
            8: {
                name: "Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø«Ø§Ù…Ù† - Ø¬Ù„ÙˆØ¯ ÙˆÙ…ØµÙ†ÙˆØ¹Ø§ØªÙ‡Ø§", hs_range: [41, 43], items: [
                    { description: "Ø¬Ù„ÙˆØ¯ Ø®Ø§Ù… ÙˆÙ…Ø¯Ø¨ÙˆØºØ©", rate: 15 },
                    { description: "Ù…ØµÙ†ÙˆØ¹Ø§Øª Ù…Ù† Ø¬Ù„Ø¯ ÙˆØ­Ù‚Ø§Ø¦Ø¨", rate: 15 }
                ]
            },
            9: {
                name: "Ø§Ù„Ù‚Ø³Ù… Ø§Ù„ØªØ§Ø³Ø¹ - Ø®Ø´Ø¨ ÙˆÙ…ØµÙ†ÙˆØ¹Ø§ØªÙ‡", hs_range: [44, 46], items: [
                    { description: "Ø®Ø´Ø¨ ÙˆÙ…ØµÙ†ÙˆØ¹Ø§ØªÙ‡", rate: 15 }
                ]
            },
            10: {
                name: "Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø¹Ø§Ø´Ø± - ÙˆØ±Ù‚ ÙˆÙ…ØµÙ†ÙˆØ¹Ø§ØªÙ‡", hs_range: [47, 49], items: [
                    { description: "ÙˆØ±Ù‚ ÙˆÙˆØ±Ù‚ Ù…Ù‚ÙˆÙ‰", rate: 5 },
                    { description: "ÙƒØªØ¨ ÙˆØµØ­Ù ÙˆÙ…Ø·Ø¨ÙˆØ¹Ø§Øª", rate: 5 }
                ]
            },
            11: {
                name: "Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø­Ø§Ø¯ÙŠ Ø¹Ø´Ø± - Ù…ÙˆØ§Ø¯ Ù†Ø³ÙŠØ¬ÙŠØ©", hs_range: [50, 63], items: [
                    { description: "Ù‚Ø·Ù† ÙˆØ§Ù„ÙŠØ§Ù Ù†Ø³ÙŠØ¬ÙŠØ©", rate: 15 },
                    { description: "Ø³Ø¬Ø§Ø¯ ÙˆØ§ØºØ·ÙŠØ© Ø§Ø±Ø¶ÙŠØ§Øª", rate: 15 },
                    { description: "Ø§Ù„Ø¨Ø³Ø© ÙˆØªÙˆØ§Ø¨Ø¹", rate: 15 }
                ]
            },
            12: {
                name: "Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø«Ø§Ù†ÙŠ Ø¹Ø´Ø± - Ø§Ø­Ø°ÙŠØ© ÙˆØ§ØºØ·ÙŠØ© Ø±Ø§Ø³", hs_range: [64, 67], items: [
                    { description: "Ø§Ø­Ø°ÙŠØ© ÙˆØ§Ø¬Ø²Ø§Ø¦Ù‡Ø§", rate: 15 },
                    { description: "Ø§ØºØ·ÙŠØ© Ø§Ù„Ø±Ø§Ø³", rate: 15 }
                ]
            },
            13: {
                name: "Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø«Ø§Ù„Ø« Ø¹Ø´Ø± - Ø­Ø¬Ø± ÙˆØ¬Øµ ÙˆØ®Ø²Ù ÙˆØ²Ø¬Ø§Ø¬", hs_range: [68, 70], items: [
                    { description: "Ù…ØµÙ†ÙˆØ¹Ø§Øª Ù…Ù† Ø­Ø¬Ø± ÙˆØ¬Øµ", rate: 15 },
                    { description: "Ø²Ø¬Ø§Ø¬ ÙˆÙ…ØµÙ†ÙˆØ¹Ø§ØªÙ‡", rate: 15 }
                ]
            },
            14: {
                name: "Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø±Ø§Ø¨Ø¹ Ø¹Ø´Ø± - Ù…Ø¹Ø§Ø¯Ù† Ø«Ù…ÙŠÙ†Ø©", hs_range: [71, 71], items: [
                    { description: "Ù„Ø¤Ù„Ø¤ ÙˆØ§Ø­Ø¬Ø§Ø± ÙƒØ±ÙŠÙ…Ø© ÙˆÙ…Ø¬ÙˆÙ‡Ø±Ø§Øª", rate: 5 }
                ]
            },
            15: {
                name: "Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø®Ø§Ù…Ø³ Ø¹Ø´Ø± - Ù…Ø¹Ø§Ø¯Ù† Ø¹Ø§Ø¯ÙŠØ©", hs_range: [72, 83], items: [
                    { description: "Ø­Ø¯ÙŠØ¯ ÙˆØµÙ„Ø¨ ÙÙˆÙ„Ø§Ø°", rate: 10 },
                    { description: "Ù…ØµÙ†ÙˆØ¹Ø§Øª Ù…Ù† Ø­Ø¯ÙŠØ¯ ÙˆØµÙ„Ø¨", rate: 10 },
                    { description: "Ù†Ø­Ø§Ø³ ÙˆÙ…ØµÙ†ÙˆØ¹Ø§ØªÙ‡", rate: 10 },
                    { description: "Ø§Ù„Ù…Ù†ÙŠÙˆÙ… ÙˆÙ…ØµÙ†ÙˆØ¹Ø§ØªÙ‡", rate: 10 }
                ]
            },
            16: {
                name: "Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø³Ø§Ø¯Ø³ Ø¹Ø´Ø± - Ø¢Ù„Ø§Øª ÙˆØ£Ø¬Ù‡Ø²Ø© ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ©", hs_range: [84, 85], items: [
                    { description: "Ù…ÙØ§Ø¹Ù„Ø§Øª Ù†ÙˆÙˆÙŠØ© ÙˆÙ…Ø±Ø§Ø¬Ù„ ÙˆØ¢Ù„Ø§Øª", rate: 30 },
                    { description: "Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª Ø§Ù„Ø§Ù†Ø´Ø§Ø¦ÙŠØ©", rate: 5 },
                    { description: "Ø¢Ù„Ø§Øª ÙˆØ£Ø¬Ù‡Ø²Ø© ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ© ÙˆØªÙ„ÙØ²ÙŠÙˆÙ†", rate: 30 },
                    { description: "Ù…Ø³ØªÙ„Ø²Ù…Ø§Øª Ø§Ù„Ø·Ø§Ù‚Ø© Ø§Ù„Ø´Ù…Ø³ÙŠØ©", rate: 5 }
                ]
            },
            17: {
                name: "Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø³Ø§Ø¨Ø¹ Ø¹Ø´Ø± - Ù…Ø¹Ø¯Ø§Øª Ø§Ù„Ù†Ù‚Ù„", hs_range: [86, 89], items: [
                    { description: "Ù‚Ø§Ø·Ø±Ø§Øª ÙˆÙ…Ø¹Ø¯Ø§Øª Ø§Ù„Ø³ÙƒÙƒ Ø§Ù„Ø­Ø¯ÙŠØ¯ÙŠØ©", rate: 15 },
                    { description: "Ø³ÙŠØ§Ø±Ø§Øª ÙˆØ¬Ø±Ø§Ø±Ø§Øª ÙˆØ¯Ø±Ø§Ø¬Ø§Øª ÙˆÙ…Ø±ÙƒØ¨Ø§Øª ÙˆØ§Ø¬Ø²Ø§Ø¦Ù‡Ø§ ÙˆÙ„ÙˆØ§Ø²Ù…Ù‡Ø§", rate: 15 },
                    { description: "Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª Ø§Ù„Ø²Ø±Ø§Ø¹ÙŠØ© ÙˆØ§Ù„Ø§Ù†ØªØ§Ø¬ÙŠØ© ÙˆØ§Ù„Ø§Ù†Ø´Ø§Ø¦ÙŠØ©", rate: 5 },
                    { description: "Ù…Ø±ÙƒØ¨Ø§Øª Ø¬ÙˆÙŠØ© ÙˆÙØ¶Ø§Ø¦ÙŠØ©", rate: 15 },
                    { description: "Ø³ÙÙ† ÙˆÙ‚ÙˆØ§Ø±Ø¨", rate: 15 }
                ]
            },
            18: {
                name: "Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø«Ø§Ù…Ù† Ø¹Ø´Ø± - Ø£Ø¯ÙˆØ§Øª Ø¹Ù„Ù…ÙŠØ© ÙˆØ·Ø¨ÙŠØ©", hs_range: [90, 92], items: [
                    { description: "Ø£Ø¯ÙˆØ§Øª Ù„Ù„Ø¨ØµØ±ÙŠØ§Øª ÙˆØ§Ù„ØªØµÙˆÙŠØ± ÙˆØ§Ù„Ø·Ø¨", rate: 5 },
                    { description: "Ø³Ø§Ø¹Ø§Øª ÙˆØ§Ø¬Ø²Ø§Ø¤Ù‡Ø§", rate: 15 },
                    { description: "Ø£Ø¯ÙˆØ§Øª Ù…ÙˆØ³ÙŠÙ‚ÙŠØ©", rate: 15 }
                ]
            },
            19: {
                name: "Ø§Ù„Ù‚Ø³Ù… Ø§Ù„ØªØ§Ø³Ø¹ Ø¹Ø´Ø± - Ø£Ø³Ù„Ø­Ø© ÙˆØ°Ø®Ø§Ø¦Ø±", hs_range: [93, 93], items: [
                    { description: "Ø£Ø³Ù„Ø­Ø© ÙˆØ°Ø®Ø§Ø¦Ø±", rate: 30 }
                ]
            },
            20: {
                name: "Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø¹Ø´Ø±ÙˆÙ† - Ø³Ù„Ø¹ Ù…ØªÙ†ÙˆØ¹Ø©", hs_range: [94, 96], items: [
                    { description: "Ø§Ø«Ø§Ø« ÙˆØ£Ø¬Ù‡Ø²Ø© Ø§Ù†Ø§Ø±Ø©", rate: 15 },
                    { description: "Ù„Ø¹Ø¨ Ø£Ø·ÙØ§Ù„ ÙˆØ§Ù„Ø¹Ø§Ø¨ Ø±ÙŠØ§Ø¶ÙŠØ©", rate: 15 },
                    { description: "Ù…ØµÙ†ÙˆØ¹Ø§Øª Ù…ØªÙ†ÙˆØ¹Ø©", rate: 5 }
                ]
            },
            21: {
                name: "Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø­Ø§Ø¯ÙŠ ÙˆØ§Ù„Ø¹Ø´Ø±ÙˆÙ† - ØªØ­Ù ÙÙ†ÙŠØ©", hs_range: [97, 97], items: [
                    { description: "ØªØ­Ù ÙÙ†ÙŠØ© ÙˆÙ‚Ø·Ø¹ Ø§Ø«Ø±ÙŠØ©", rate: 30 }
                ]
            }
        };

    </script>
    <script src="hs_data.js"></script>
    <script>

        console.log('Loaded', Object.keys(HS_DATA).length, 'HS codes with AVR_MNT');

        function formatNumber(num) {
            return new Intl.NumberFormat('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }).format(num);
        }

        function formatNumberInt(num) {
            return new Intl.NumberFormat('en-US').format(Math.round(num));
        }

        function getSectionFromChapter(hsCode) {
            const chapter = parseInt(hsCode.substring(0, 2));
            for (const [sectionNum, sectionData] of Object.entries(PDF_TARIFF_DATA)) {
                const [start, end] = sectionData.hs_range;
                if (chapter >= start && chapter <= end) {
                    return { num: sectionNum, data: sectionData };
                }
            }
            return null;
        }

        function findHSCode(hsCode) {
            hsCode = hsCode.trim();
            if (HS_DATA[hsCode]) return HS_DATA[hsCode];

            for (let len = hsCode.length; len >= 4; len--) {
                const partial = hsCode.substring(0, len);
                for (const key of Object.keys(HS_DATA)) {
                    if (key.startsWith(partial)) return HS_DATA[key];
                }
            }

            return null;
        }

        // Update unit price display and manual value section when HS code changes
        function updatePriceDisplay() {
            const hsCode = document.getElementById('hsCode').value.trim();
            const unitPriceDisplay = document.getElementById('unitPriceDisplay');
            const warningBox = document.getElementById('warningBox');
            const manualSection = document.getElementById('manualValueSection');

            // Only check when input looks like an HS code (starts with digit and >= 6 chars)
            const isHsCode = /^\d/.test(hsCode) && hsCode.length >= 6;
            if (isHsCode) {
                const data = findHSCode(hsCode);
                if (data && data.avr_mnt) {
                    unitPriceDisplay.innerHTML = `ğŸ’° Ø³Ø¹Ø± Ø§Ù„ÙˆØ­Ø¯Ø© (AVR_MNT): <strong>$${formatNumber(data.avr_mnt)}</strong> / ${data.avr_unt_nam || data.avr_unt}`;
                    unitPriceDisplay.classList.add('show');
                    warningBox.classList.remove('show');
                    manualSection.classList.remove('show');
                } else if (data) {
                    unitPriceDisplay.classList.remove('show');
                    warningBox.classList.add('show');
                    manualSection.classList.add('show');
                } else {
                    unitPriceDisplay.classList.remove('show');
                    warningBox.classList.remove('show');
                    manualSection.classList.remove('show');
                }
            } else {
                unitPriceDisplay.classList.remove('show');
                warningBox.classList.remove('show');
                manualSection.classList.remove('show');
            }
        }
        document.getElementById('hsCode').addEventListener('input', updatePriceDisplay);

        function calculate() {
            const hsCode = document.getElementById('hsCode').value.trim();
            const weight = parseFloat(document.getElementById('weight').value) || 0;
            const manualValue = parseFloat(document.getElementById('manualValue').value) || 0;

            if (!hsCode) {
                alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù…Ø² HS Code');
                return;
            }

            // Check if this HS code has avr_mnt
            const excelData = findHSCode(hsCode);
            const hasPrice = excelData && excelData.avr_mnt;

            if (hasPrice && weight <= 0) {
                alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ÙˆØ²Ù† / Ø§Ù„ÙƒÙ…ÙŠØ©');
                return;
            }

            if (!hasPrice && manualValue <= 0) {
                alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ© Ø¨Ø§Ù„Ø¯ÙˆÙ„Ø§Ø±');
                return;
            }

            const btn = document.getElementById('calculateBtn');
            btn.classList.add('loading');
            btn.innerHTML = '<div class="spinner"></div><span>Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­Ø³Ø§Ø¨...</span>';

            setTimeout(() => {
                btn.classList.remove('loading');
                btn.innerHTML = '<span class="btn-text">Ø§Ø­Ø³Ø¨ Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„ÙƒÙ…Ø±ÙƒÙŠØ©</span><span class="btn-icon">ğŸ“Š</span>';

                performCalculation(hsCode, weight, manualValue);
            }, 500);
        }

        function performCalculation(hsCode, weight, manualValue) {
            const excelData = findHSCode(hsCode);

            if (!excelData) {
                document.getElementById('resultsSection').classList.remove('show');
                document.getElementById('errorSection').classList.add('show');
                document.getElementById('errorText').textContent = `Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø±Ù…Ø² HS: ${hsCode}`;
                return;
            }

            const isManualMode = !excelData.avr_mnt;

            // Warnings Checks
            // Fuzzy Match Warning
            let matchWarning = '';
            if (excelData.hs_code !== hsCode) {
                matchWarning = `
                    <div style="background: rgba(251, 191, 36, 0.1); border: 1px solid var(--warning); border-radius: 8px; padding: 0.8rem; margin-bottom: 1rem;">
                        <div style="color: var(--warning); font-weight: bold; margin-bottom: 0.5rem;">âš ï¸ ØªÙ†Ø¨ÙŠÙ‡: Ø±Ù…Ø² ØºÙŠØ± Ù…Ø·Ø§Ø¨Ù‚ ØªÙ…Ø§Ù…Ø§Ù‹</div>
                        <div style="font-size: 0.9rem; color: var(--text-secondary);">
                            Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø±Ù…Ø² <strong>${hsCode}</strong>. 
                            ØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø£Ù‚Ø±Ø¨ Ø±Ù…Ø² Ù…Ø·Ø§Ø¨Ù‚: <strong>${excelData.hs_code}</strong>
                        </div>
                    </div>
                `;
            }

            // Unit Mismatch Warning
            const unitType = excelData.avr_unt || 'KGM';
            const unitName = excelData.avr_unt_nam || (unitType === 'KGM' ? 'ÙƒÙŠÙ„Ùˆ ØºØ±Ø§Ù…' : unitType);
            const isPieceUnit = ['NMB', 'DPC', 'SET', 'PRS', 'CTB', 'BOX', 'PK', 'GSC'].includes(unitType);
            const isWeightUnit = ['KGM', 'TNE', 'GRM', 'KG', 'TON'].includes(unitType);

            let unitWarning = '';
            if (isPieceUnit && currentUnit === 'weight') {
                unitWarning = `
                    <div style="background: rgba(239, 68, 68, 0.1); border: 1px solid var(--error); border-radius: 8px; padding: 0.8rem; margin-bottom: 1rem;">
                        <div style="color: var(--error); font-weight: bold; margin-bottom: 0.5rem;">âš ï¸ ØªÙ†Ø¨ÙŠÙ‡: Ø§Ø®ØªÙ„Ø§Ù ÙˆØ­Ø¯Ø© Ø§Ù„Ù‚ÙŠØ§Ø³</div>
                        <div style="font-size: 0.9rem; color: var(--text-secondary);">
                            Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ Ù…Ø³Ø¹Ø± ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù… <strong>Ø¨Ø§Ù„Ø¹Ø¯Ø¯/Ø§Ù„Ù‚Ø·Ø¹Ø© (${unitName})</strong>ØŒ Ù„ÙƒÙ†Ùƒ Ø§Ø®ØªØ±Øª Ø§Ù„Ø­Ø³Ø§Ø¨ <strong>Ø¨Ø§Ù„ÙˆØ²Ù†</strong>.
                            <br>Ù‚Ø¯ ØªØ¸Ù‡Ø± Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ØºÙŠØ± Ø¯Ù‚ÙŠÙ‚Ø© (Ø£Ø±Ù‚Ø§Ù… Ø¹Ø§Ù„ÙŠØ© Ø¬Ø¯Ø§Ù‹). ÙŠÙØ¶Ù„ ØªØºÙŠÙŠØ± Ù†ÙˆØ¹ Ø§Ù„Ù‚ÙŠØ§Ø³ Ø¥Ù„Ù‰ "Ø¨Ø§Ù„Ù‚Ø·Ø¹".
                        </div>
                    </div>
                `;
            } else if (isWeightUnit && currentUnit === 'quantity') {
                unitWarning = `
                    <div style="background: rgba(239, 68, 68, 0.1); border: 1px solid var(--error); border-radius: 8px; padding: 0.8rem; margin-bottom: 1rem;">
                        <div style="color: var(--error); font-weight: bold; margin-bottom: 0.5rem;">âš ï¸ ØªÙ†Ø¨ÙŠÙ‡: Ø§Ø®ØªÙ„Ø§Ù ÙˆØ­Ø¯Ø© Ø§Ù„Ù‚ÙŠØ§Ø³</div>
                        <div style="font-size: 0.9rem; color: var(--text-secondary);">
                            Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ Ù…Ø³Ø¹Ø± ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù… <strong>Ø¨Ø§Ù„ÙˆØ²Ù† (${unitName})</strong>ØŒ Ù„ÙƒÙ†Ùƒ Ø§Ø®ØªØ±Øª Ø§Ù„Ø­Ø³Ø§Ø¨ <strong>Ø¨Ø§Ù„Ø¹Ø¯Ø¯</strong>.
                            <br>Ù‚Ø¯ ØªØ¸Ù‡Ø± Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ØºÙŠØ± Ø¯Ù‚ÙŠÙ‚Ø©. ÙŠÙØ¶Ù„ ØªØºÙŠÙŠØ± Ù†ÙˆØ¹ Ø§Ù„Ù‚ÙŠØ§Ø³ Ø¥Ù„Ù‰ "Ø¨Ø§Ù„ÙˆØ²Ù†".
                        </div>
                    </div>
                `;
            }

            document.getElementById('errorSection').classList.remove('show');
            document.getElementById('resultsSection').classList.add('show');

            const tariffRate = excelData.tariff_rate || 0;
            const additionalRate = excelData.additional_rate || 3;
            const totalTariff = tariffRate + additionalRate;
            const unitPrice = excelData.avr_mnt;

            // Constants
            const USD_TO_IQD = 1320;

            // Calculate total value
            let totalValueUsd;
            if (isManualMode) {
                totalValueUsd = manualValue || 0;
            } else {
                totalValueUsd = unitPrice * weight;
            }

            // Step 2: Convert to IQD
            const totalValueIqd = totalValueUsd * USD_TO_IQD;

            // Step 3: Calculate duty (tariff rate on value)
            const dutyBeforeDiscount = totalValueIqd * (totalTariff / 100);

            // Step 4: Apply 75%
            const finalDuty = dutyBeforeDiscount * 0.75;
            const finalDutyUsd = finalDuty / USD_TO_IQD;

            // Get PDF section
            const section = getSectionFromChapter(hsCode);

            // Build product info HTML
            let priceInfoHtml = '';
            if (isManualMode) {
                priceInfoHtml = `
                <div class="info-item">
                    <div class="label">Ø³Ø¹Ø± Ø§Ù„ÙˆØ­Ø¯Ø© Ø§Ù„ØªÙ‚Ø¯ÙŠØ±ÙŠ</div>
                    <div class="value" style="color: var(--warning);">âš ï¸ ØºÙŠØ± Ù…ØªÙˆÙØ± (Ø¥Ø¯Ø®Ø§Ù„ ÙŠØ¯ÙˆÙŠ)</div>
                </div>
                <div class="info-item">
                    <div class="label">Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ© (USD) - ÙŠØ¯ÙˆÙŠ</div>
                    <div class="value highlight">$${formatNumber(totalValueUsd)}</div>
                </div>`;
            } else {
                priceInfoHtml = `
                <div class="info-item">
                    <div class="label">Ø³Ø¹Ø± Ø§Ù„ÙˆØ­Ø¯Ø© Ø§Ù„ØªÙ‚Ø¯ÙŠØ±ÙŠ</div>
                    <div class="value success">$${formatNumber(unitPrice)} / ${unitName}</div>
                </div>
                <div class="info-item">
                    <div class="label">Ø§Ù„ÙƒÙ…ÙŠØ© / Ø§Ù„ÙˆØ²Ù†</div>
                    <div class="value">${formatNumber(weight)} ${unitName}</div>
                </div>
                <div class="info-item">
                    <div class="label">Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ© (USD)</div>
                    <div class="value highlight">$${formatNumber(totalValueUsd)}</div>
                </div>`;
            }

            // Display product info
            document.getElementById('productInfo').innerHTML = `
            ${matchWarning}
            ${unitWarning}
            <div class="info-item">
                <div class="label">Ø±Ù…Ø² HS</div>
                <div class="value">${excelData.hs_code}</div>
            </div>
            <div class="info-item">
                <div class="label">ÙˆØµÙ Ø§Ù„Ø¨Ø¶Ø§Ø¹Ø©</div>
                <div class="value">${excelData.description}</div>
            </div>
            <div class="info-item">
                <div class="label">Ù†Ø³Ø¨Ø© Ø§Ù„Ø±Ø³Ù…</div>
                <div class="value">${tariffRate}% + ${additionalRate}% (Ø¥Ø¶Ø§ÙÙŠ)</div>
            </div>
            ${priceInfoHtml}
            <div class="info-item">
                <div class="label">Ù†Ø³Ø¨Ø© Ø§Ù„ØªØ¹Ø±ÙŠÙØ©</div>
                <div class="value">${tariffRate}% + ${additionalRate}% = ${totalTariff}%</div>
            </div>
        `;

            // Build step 1 based on mode
            const step1Html = isManualMode
                ? `<div class="step-title">Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ© Ø¨Ø§Ù„Ø¯ÙˆÙ„Ø§Ø± (Ø¥Ø¯Ø®Ø§Ù„ ÙŠØ¯ÙˆÙŠ)</div>
                   <div class="step-formula">$${formatNumber(totalValueUsd)} USD</div>`
                : `<div class="step-title">Ø­Ø³Ø§Ø¨ Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ© (Ø³Ø¹Ø± Ø§Ù„ÙˆØ­Ø¯Ø© Ã— Ø§Ù„ÙƒÙ…ÙŠØ©)</div>
                   <div class="step-formula">$${formatNumber(unitPrice)} Ã— ${formatNumber(weight)} = $${formatNumber(totalValueUsd)}</div>`;

            // Display calculation steps
            document.getElementById('calculationSteps').innerHTML = `
            <div class="step">
                <div class="step-number">1</div>
                <div class="step-content">${step1Html}</div>
            </div>
            <div class="step">
                <div class="step-number">2</div>
                <div class="step-content">
                    <div class="step-title">ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ø¯ÙŠÙ†Ø§Ø± Ø§Ù„Ø¹Ø±Ø§Ù‚ÙŠ (Ã— ${USD_TO_IQD})</div>
                    <div class="step-formula">$${formatNumber(totalValueUsd)} Ã— ${USD_TO_IQD} = ${formatNumber(totalValueIqd)} IQD</div>
                </div>
            </div>
            <div class="step">
                <div class="step-number">3</div>
                <div class="step-content">
                    <div class="step-title">Ø§Ù„ØªØ¹Ø±ÙŠÙØ© Ø§Ù„ÙƒÙ…Ø±ÙƒÙŠØ© (${tariffRate}% + ${additionalRate}% = ${totalTariff}%)</div>
                    <div class="step-formula">${formatNumber(totalValueIqd)} Ã— ${totalTariff}% = ${formatNumber(dutyBeforeDiscount)} IQD</div>
                </div>
            </div>
            <div class="step">
                <div class="step-number">4</div>
                <div class="step-content">
                    <div class="step-title">ØªØ·Ø¨ÙŠÙ‚ Ù†Ø³Ø¨Ø© 75%</div>
                    <div class="step-formula">${formatNumber(dutyBeforeDiscount)} Ã— 75% = ${formatNumber(finalDuty)} IQD</div>
                </div>
            </div>
            <div class="final-result">
                <div class="label">ğŸ’° Ø§Ù„Ø±Ø³Ù… Ø§Ù„ÙƒÙ…Ø±ÙƒÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</div>
                <div class="amount">${formatNumberInt(finalDuty)} IQD</div>
                <div class="amount-usd">â‰ˆ $${formatNumber(finalDutyUsd)} USD</div>
            </div>
        `;

            // Display PDF matches
            if (section) {
                document.getElementById('matchList').innerHTML = section.data.items.map((item, index) => `
                <div class="match-item ${index === 0 ? 'selected' : ''}" onclick="selectTariffRate(${item.rate}, this)" data-rate="${item.rate}">
                    <div class="match-rank">${index + 1}</div>
                    <div class="match-details">
                        <div class="match-desc">${item.description}</div>
                        <div class="match-section">${section.data.name}</div>
                    </div>
                    <div class="match-rate">
                        <div class="rate">${item.rate}%</div>
                    </div>
                </div>
            `).join('');
                // Show the toggle control when there are matches
                document.getElementById('pdfToggleControl').style.display = 'flex';
            } else {
                // Hide the toggle control when there are no matches
                document.getElementById('pdfToggleControl').style.display = 'none';
            }

            document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth' });
        }

        // Autocomplete with description search
        const hsInput = document.getElementById('hsCode');
        const autocompleteResults = document.getElementById('autocompleteResults');

        hsInput.addEventListener('input', function () {
            const value = this.value.trim();
            if (value.length < 2) {
                autocompleteResults.classList.remove('show');
                return;
            }

            // Update price display
            updatePriceDisplay();

            let matches = [];
            const isNumeric = /^\d/.test(value);

            if (isNumeric) {
                // Search by HS code prefix
                matches = Object.entries(HS_DATA)
                    .filter(([code]) => code.startsWith(value))
                    .slice(0, 15);
            } else {
                // Search by Arabic description
                const searchLower = value.toLowerCase();
                matches = Object.entries(HS_DATA)
                    .filter(([code, data]) => data.description && data.description.includes(searchLower))
                    .slice(0, 15);
            }

            if (matches.length === 0) {
                autocompleteResults.innerHTML = `<div class="autocomplete-header">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ù„Ù€ "${value}"</div>`;
                autocompleteResults.classList.add('show');
                return;
            }

            const headerText = isNumeric
                ? `ğŸ”¢ ${matches.length} Ù†ØªÙŠØ¬Ø© Ù„Ù„Ø±Ù…Ø² "${value}"`
                : `ğŸ” ${matches.length} Ù†ØªÙŠØ¬Ø© Ù„Ù„ÙˆØµÙ "${value}"`;

            autocompleteResults.innerHTML = `<div class="autocomplete-header">${headerText}</div>` +
                matches.map(([code, data]) => {
                    const hasPriceClass = data.avr_mnt ? 'has-price' : 'no-price';
                    const priceHtml = data.avr_mnt
                        ? `<div class="price">ğŸŸ¢ ğŸ’° $${data.avr_mnt.toFixed(2)} / ${data.avr_unt_nam || data.avr_unt || 'KGM'}</div>`
                        : `<div class="no-price">ğŸŸ¡ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø³Ø¹Ø± ØªÙ‚Ø¯ÙŠØ±ÙŠ â€” ÙŠÙ…ÙƒÙ† Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù‚ÙŠÙ…Ø© ÙŠØ¯ÙˆÙŠØ§Ù‹</div>`;
                    return `
                    <div class="autocomplete-item" data-code="${code}">
                        <span class="hs-code">${code}</span>
                        <span class="price-badge ${hasPriceClass}"></span>
                        <span class="desc">${data.description || ''}</span>
                        ${priceHtml}
                    </div>`;
                }).join('');
            autocompleteResults.classList.add('show');
        });

        autocompleteResults.addEventListener('click', function (e) {
            const item = e.target.closest('.autocomplete-item');
            if (item) {
                hsInput.value = item.dataset.code;
                autocompleteResults.classList.remove('show');
                updatePriceDisplay();
            }
        });

        document.addEventListener('click', function (e) {
            if (!e.target.closest('.autocomplete-container')) {
                autocompleteResults.classList.remove('show');
            }
        });

        document.querySelectorAll('input').forEach(input => {
            input.addEventListener('keypress', function (e) {
                if (e.key === 'Enter') {
                    autocompleteResults.classList.remove('show');
                    calculate();
                }
            });
        });
    </script>
</body>

</html>